var e,n=require("react"),t=(e=require("resize-observer-polyfill"))&&"object"==typeof e&&"default"in e?e.default:e;function r(){return(r=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var i={debug:10,info:20,warn:30,error:40,none:100},o="undefined"!=typeof window&&window.document&&window.document.createElement?n.useLayoutEffect:n.useEffect;module.exports=function(e){var c=void 0===e?{}:e,f=c.logLevel,u=c.maxFontSize,a=void 0===u?100:u,l=c.minFontSize,s=void 0===l?20:l,d=c.onFinish,S=c.onStart,v=c.resolution,z=void 0===v?5:v,w=i[void 0===f?"info":f],y=n.useCallback(function(){return{calcKey:0,fontSize:a,fontSizePrev:s,fontSizeMax:a,fontSizeMin:s}},[a,s]),h=n.useRef(null),m=n.useRef(),M=n.useRef(!1),b=n.useState(y),p=b[0],x=b[1],g=p.calcKey,K=p.fontSize,F=p.fontSizeMax,E=p.fontSizeMin,P=p.fontSizePrev,j=null,O=n.useState(function(){return new t(function(){j=window.requestAnimationFrame(function(){M.current||(S&&S(),M.current=!0,x(r({},y(),{calcKey:g+1})))})})})[0];n.useEffect(function(){return h.current&&O.observe(h.current),function(){j&&window.cancelAnimationFrame(j),O.disconnect()}},[j,O]);var R=h.current&&h.current.innerHTML;n.useEffect(function(){0===g||M.current||(R!==m.current&&(S&&S(),x(r({},y(),{calcKey:g+1}))),m.current=R)},[g,y,R,S]),o(function(){if(0!==g){var e=Math.abs(K-P)<=z,n=!!h.current&&(h.current.scrollHeight>h.current.offsetHeight||h.current.scrollWidth>h.current.offsetWidth),t=K>P;if(e)n&&K===P?(M.current=!1,w<=i.info&&console.info("[use-fit-text] reached `minFontSize = "+s+"` without fitting text")):n?x({fontSize:t?P:E,fontSizeMax:F,fontSizeMin:E,fontSizePrev:P,calcKey:g}):(M.current=!1,d&&d(K));else{var r,o=F,c=E;n?(r=t?P-K:E-K,o=Math.min(F,K)):(r=t?F-K:P-K,c=Math.max(E,K)),x({calcKey:g,fontSize:K+r/2,fontSizeMax:o,fontSizeMin:c,fontSizePrev:K})}}},[g,K,F,E,P,d,h,z]);var q=n.useCallback(function(){x(r({},y(),{calcKey:g+1}))},[g,y]);return{fontSize:K+"%",ref:h,forceRefit:q}};
//# sourceMappingURL=index.js.map
