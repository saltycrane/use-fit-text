import{useCallback as n,useRef as e,useState as t,useEffect as r,useLayoutEffect as i}from"react";import o from"resize-observer-polyfill";function c(){return(c=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n}).apply(this,arguments)}var f={debug:10,info:20,warn:30,error:40,none:100},u="undefined"!=typeof window&&window.document&&window.document.createElement?i:r;export default function(i){var a=void 0===i?{}:i,l=a.logLevel,d=a.maxFontSize,s=void 0===d?100:d,v=a.minFontSize,z=void 0===v?20:v,S=a.onFinish,m=a.onStart,w=a.resolution,h=void 0===w?5:w,y=f[void 0===l?"info":l],M=n(function(){return{calcKey:0,fontSize:s,fontSizePrev:z,fontSizeMax:s,fontSizeMin:z}},[s,z]),p=e(null),x=e(),b=e(!1),g=t(M),K=g[0],F=g[1],P=K.calcKey,O=K.fontSize,j=K.fontSizeMax,H=K.fontSizeMin,A=K.fontSizePrev,L=null,W=t(function(){return new o(function(){L=window.requestAnimationFrame(function(){b.current||(m&&m(),b.current=!0,F(c({},M(),{calcKey:P+1})))})})})[0];r(function(){return p.current&&W.observe(p.current),function(){L&&window.cancelAnimationFrame(L),W.disconnect()}},[L,W]);var q=p.current&&p.current.innerHTML;r(function(){0===P||b.current||(q!==x.current&&(m&&m(),F(c({},M(),{calcKey:P+1}))),x.current=q)},[P,M,q,m]),u(function(){if(0!==P){var n=Math.abs(O-A)<=h,e=!!p.current&&(p.current.scrollHeight>p.current.offsetHeight||p.current.scrollWidth>p.current.offsetWidth),t=O>A;if(n)e&&O===A?(b.current=!1,y<=f.info&&console.info("[use-fit-text] reached `minFontSize = "+z+"` without fitting text")):e?F({fontSize:t?A:H,fontSizeMax:j,fontSizeMin:H,fontSizePrev:A,calcKey:P}):(b.current=!1,S&&S(O));else{var r,i=j,o=H;e?(r=t?A-O:H-O,i=Math.min(j,O)):(r=t?j-O:A-O,o=Math.max(H,O)),F({calcKey:P,fontSize:O+r/2,fontSizeMax:i,fontSizeMin:o,fontSizePrev:O})}}},[P,O,j,H,A,S,p,h]);var E=n(function(){F(c({},M(),{calcKey:P+1}))},[P,M]);return{fontSize:O+"%",ref:p,forceRefit:E}}
//# sourceMappingURL=index.esm.js.map
